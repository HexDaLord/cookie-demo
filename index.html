<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wie Websites dich erkennen ğŸª â€“ Interaktive Demo</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background-color: #f6f8fa;
      color: #333;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #4a90e2;
      color: white;
      padding: 1.5rem;
      text-align: center;
    }
    main {
      max-width: 900px;
      margin: 2rem auto;
      padding: 1rem;
    }
    section {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    h2 {
      color: #4a90e2;
      margin-top: 0;
    }
    button {
      background-color: #4a90e2;
      color: white;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }
    button:hover {
      background-color: #357abd;
    }
    pre {
      background: #f9f9f9;
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      white-space: pre-wrap;
      margin-top: 0.5rem;
    }
    .info {
      font-size: 0.95rem;
      background: #eef6ff;
      padding: 0.8rem 1rem;
      border-left: 4px solid #4a90e2;
      margin-bottom: 1rem;
      border-radius: 6px;
    }
    footer {
      text-align: center;
      padding: 1rem;
      background: #f0f0f0;
      font-size: 0.9rem;
      color: #666;
    }
    #greeting {
      font-size: 1.3rem;
      font-weight: 500;
      text-align: center;
      margin-bottom: 1.5rem;
      color: #333;
    }
    #map {
      height: 300px;
      width: 100%;
      border-radius: 8px;
      margin-top: 1rem;
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>Wie Websites dich erkennen ğŸª</h1>
    <p>Eine interaktive Demo fÃ¼r den Unterricht</p>
  </header>

  <main>
    <div id="greeting">Hallo, SchÃ¼ler!</div>

    <!-- Abschnitt 1: Cookies -->
    <section>
      <h2>ğŸª 1. Cookies â€“ kleine Speicher im Browser</h2>
      <div class="info">
        Websites kÃ¶nnen kleine Textdateien im Browser speichern, sogenannte <b>Cookies</b>.  
        Darin kÃ¶nnen z. B. dein Name, deine Sprache oder Einstellungen gespeichert werden.  
        Manche Cookies sind nÃ¼tzlich â€“ andere werden zum <b>Tracking</b> benutzt.
      </div>

      <button onclick="setCookies()">Cookies setzen</button>
      <button onclick="deleteCookies()">Cookies lÃ¶schen</button>

      <pre id="cookie-info">Noch keine Cookies gesetzt.</pre>
    </section>

    <!-- Abschnitt 2: Browser- & GerÃ¤tedaten -->
    <section>
      <h2>ğŸ’» 2. Browser- und GerÃ¤tedaten</h2>
      <div class="info">
        Auch ohne Cookies kann eine Website schon einiges Ã¼ber dein GerÃ¤t erfahren â€“  
        z. B. welches Betriebssystem du nutzt, welche Sprache eingestellt ist  
        oder wie groÃŸ dein Bildschirm ist.
      </div>

      <button onclick="showDeviceInfo()">Daten anzeigen</button>
      <pre id="device-info">Noch keine Daten angezeigt.</pre>
    </section>

    <!-- Abschnitt 3: Standortdaten -->
    <section>
      <h2>ğŸ“ 3. Standortdaten</h2>
      <div class="info">
        Einige Websites (z. B. Karten oder Wetterseiten) kÃ¶nnen deinen Standort abfragen.  
        Das funktioniert aber <b>nur mit deiner ausdrÃ¼cklichen Zustimmung</b>.  
        Diese Demo zeigt, wie das aussieht. Besuche die Seite auch mal mit deinem Handy, und vergleiche.
      </div>

      <button onclick="getLocation()">Standort abfragen</button>
      <pre id="location-info">Noch keine Standortdaten.</pre>
      <div id="map"></div>
    </section>
  </main>

  <footer>
    Â© Unterrichts-Demo â€“ Keine Daten werden Ã¼bertragen oder gespeichert.
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // --- Hilfsfunktionen ---
    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
    }

    function updateGreeting() {
      const username = getCookie("username");
      const greeting = document.getElementById("greeting");
      greeting.textContent = username ? `Hallo, ${username}!` : "Hallo, SchÃ¼ler!";
    }

    // --- Cookies ---
    function setCookies() {
      const name = prompt("Wie heiÃŸt du?", "SchÃ¼lerin");
      if (!name) return;
      document.cookie = `username=${encodeURIComponent(name)}; expires=Fri, 31 Dec 2025 23:59:59 UTC; path=/`;
      document.cookie = "theme=hell; expires=Fri, 31 Dec 2025 23:59:59 UTC; path=/";
      showCookies();
      updateGreeting();
    }

    function showCookies() {
      const cookieStr = document.cookie;
      document.getElementById("cookie-info").textContent = cookieStr || "Keine Cookies vorhanden.";
    }

    function deleteCookies() {
      document.cookie.split(";").forEach(c => {
        const eqPos = c.indexOf("=");
        const name = eqPos > -1 ? c.substr(0, eqPos).trim() : c.trim();
        document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      });
      showCookies();
      updateGreeting();
    }

    // --- GerÃ¤tedaten ---
    function showDeviceInfo() {
      const info = {
        "Browser / User Agent": navigator.userAgent,
        "Sprache": navigator.language,
        "Cookies aktiviert": navigator.cookieEnabled,
        "Plattform": navigator.platform,
        "BildschirmgrÃ¶ÃŸe": `${window.screen.width} x ${window.screen.height}`,
        "Zeitzone": Intl.DateTimeFormat().resolvedOptions().timeZone,
        "Aktuelle Uhrzeit": new Date().toLocaleString()
      };
      let text = "";
      for (const [key, value] of Object.entries(info)) {
        text += `â€¢ ${key}: ${value}\n`;
      }
      document.getElementById("device-info").textContent = text;
    }

    // --- Standort + Karte ---
    let map;

    function getLocation() {
      const output = document.getElementById("location-info");
      const mapDiv = document.getElementById("map");

      if (!navigator.geolocation) {
        output.textContent = "âŒ Standort wird von diesem Browser nicht unterstÃ¼tzt.";
        return;
      }

      output.textContent = "ğŸ“ Standort wird abgefragt...";

      navigator.geolocation.getCurrentPosition(
        pos => {
          const { latitude, longitude } = pos.coords;
          output.textContent = `âœ… Standort ermittelt:\nBreitengrad: ${latitude.toFixed(5)}\nLÃ¤ngengrad: ${longitude.toFixed(5)}`;

          mapDiv.style.display = "block";

          // Karte erstellen oder updaten
          if (!map) {
            map = L.map('map').setView([latitude, longitude], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              attribution: 'Â© OpenStreetMap-Mitwirkende'
            }).addTo(map);
          } else {
            map.setView([latitude, longitude], 13);
          }

          L.marker([latitude, longitude]).addTo(map)
            .bindPopup("ğŸ“ Dein Standort")
            .openPopup();
        },
        err => {
          output.textContent = "âš ï¸ Standort konnte nicht ermittelt werden oder wurde abgelehnt.";
          mapDiv.style.display = "none";
        }
      );
    }

    // --- Initiales Laden ---
    updateGreeting();
    showCookies();
  </script>
</body>
</html>
